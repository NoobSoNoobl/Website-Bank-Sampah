<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Sampah Ceria - Kelola Sampah, Jaga Alam</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* =================================
            1. SKEMA WARNA & GLOBAL STYLES
            ================================= */
        :root {
            --color-primary: #1E88E5; /* Biru Cerah */
            --color-secondary: #43A047; /* Hijau Alam yang Kuat */
            --color-accent: #FFC107; /* Kuning Cerah */
            --color-text-dark: #263238; /* Abu Gelap */
            --color-bg-light: #F0F4F8; /* Abu Biru Muda (Clean Look) */
            --color-bg-card-light: #FFFFFF;
            --color-text-on-primary: #FFFFFF;
        }

        /* Mode Gelap */
        .dark-mode {
            --color-primary: #0D47A1; 
            --color-secondary: #66BB6A; 
            --color-accent: #FFC107; 
            --color-text-dark: #E0F7FA; /* Teks terang */
            --color-bg-light: #121212; /* Background utama gelap */
            --color-bg-card-light: #1E1E1E; /* Background card gelap */
            --color-text-on-primary: #FFFFFF;
        }

        /* Reset dan Dasar */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--color-bg-light);
            color: var(--color-text-dark);
            line-height: 1.6;
            transition: background-color 0.5s, color 0.5s;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        a {
            color: var(--color-primary);
            text-decoration: none;
            transition: color 0.3s;
        }

        a:hover {
            color: var(--color-secondary);
        }

        /* Header (Sticky) */
        header {
            background-color: var(--color-primary);
            color: var(--color-text-on-primary);
            padding: 1rem 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header h1 {
            font-size: 2rem;
            font-weight: 700;
            /* Default: Text center, tapi di mobile diubah */
            text-align: center;
            flex-grow: 1;
        }
        
        /* TOMBOL HAMBURGER (Baru) - Sembunyi di Desktop */
        #hamburger-btn {
            display: none; 
            background: none;
            border: none;
            color: var(--color-text-on-primary);
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0;
            transition: color 0.2s;
        }

        /* Navigasi Desktop */
        #desktop-nav ul {
            list-style: none;
            display: flex;
        }

        #desktop-nav ul li {
            margin-left: 25px;
        }
        
        /* Navigasi Link Style */
        #desktop-nav ul li a {
            color: var(--color-text-on-primary);
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 8px;
            transition: background-color 0.3s, color 0.3s;
            cursor: pointer;
        }

        #desktop-nav ul li a:hover, #desktop-nav ul li a.active {
            background-color: var(--color-accent);
            color: var(--color-text-dark);
        }

        /* Mode Toggle Button Desktop */
        #mode-toggle-desktop {
            background-color: var(--color-accent);
            color: var(--color-text-dark);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s, color 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #mode-toggle-desktop:hover {
            background-color: #FFD700;
            transform: scale(1.05);
        }
        
        /* =================================
            Tambahan: Mobile Sidebar (Navigasi Samping)
            ================================= */
        #sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1050; /* Di atas header */
        }

        #mobile-sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 70%; /* Lebar sidebar */
            max-width: 300px;
            height: 100%;
            background-color: var(--color-bg-card-light);
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
            z-index: 1060; 
            transform: translateX(-100%); /* Sembunyi ke kiri */
            transition: transform 0.3s ease-out;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        #mobile-sidebar.open {
            transform: translateX(0); /* Tampilkan */
        }
        
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            color: var(--color-primary);
        }

        #close-sidebar-btn {
            background: none;
            border: none;
            color: var(--color-text-dark);
            font-size: 1.8rem;
            cursor: pointer;
            transition: color 0.2s;
        }

        #close-sidebar-btn:hover {
            color: var(--color-primary);
        }
        
        /* Navigasi dalam Sidebar */
        #mobile-nav {
            flex-grow: 1; /* Agar nav memakan ruang */
        }
        
        #mobile-nav ul {
            list-style: none;
            display: flex;
            flex-direction: column;
        }

        #mobile-nav ul li {
            margin-bottom: 10px;
        }

        #mobile-nav ul li a {
            display: block;
            color: var(--color-text-dark);
            font-weight: 600;
            padding: 10px;
            border-radius: 8px;
            transition: background-color 0.3s;
            cursor: pointer;
            font-size: 1.1rem;
        }
        
        #mobile-nav ul li a.active, #mobile-nav ul li a:hover {
            background-color: var(--color-primary);
            color: var(--color-text-on-primary);
        }
        
        /* Mode Toggle di Sidebar */
        #mode-toggle-mobile {
            width: 100%;
            background-color: var(--color-secondary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.1s;
            margin-top: 20px;
        }
        
        #mode-toggle-mobile:hover {
             background-color: var(--color-primary);
        }
        
        /* Dark Mode adjustments for sidebar */
        .dark-mode #mobile-sidebar {
            background-color: var(--color-bg-card-light);
        }
        .dark-mode .sidebar-header {
            border-bottom: 1px solid #333;
        }
        
        /* =================================
            2. BAGIAN UTAMA / DINAMIS (MAIN CONTENT)
            ================================= */
        #main-content {
            min-height: 70vh; /* Agar footer di bawah */
        }

        /* Hero Section - Home Page */
        .image-banner {
            width: 100%;
            height: 350px; 
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
        }

        .image-banner img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            filter: brightness(0.6); 
            position: absolute;
            z-index: 1; 
        }

        .hero {
            position: relative;
            z-index: 2;
            padding: 50px 20px; 
            text-align: center;
            color: white; 
        }

        .hero h2 {
            color: var(--color-accent);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); 
            font-weight: 700;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            font-weight: 600;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            border-radius: 30px; 
            margin-top: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: background-color 0.3s, transform 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn.primary {
            background-color: var(--color-secondary);
            color: white;
        }

        .btn.primary:hover {
            background-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* Bagian Tujuan (Area Kosong) */
        .section-tujuan {
            padding: 40px 0;
            text-align: center;
            background-color: var(--color-bg-card-light);
            border-radius: 10px;
            margin-bottom: 40px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .section-tujuan h2 {
            color: var(--color-primary);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .tujuan-placeholder {
            min-height: 100px;
            border: 2px dashed #ccc;
            padding: 20px;
            color: #888;
            font-style: italic;
            border-radius: 8px;
            margin: 0 auto;
            max-width: 800px;
            text-align: justify;
        }

        /* Card Preview Home */
        .home-cards-preview h2 {
            text-align: center;
            color: var(--color-primary);
            margin-bottom: 25px;
        }

        .cards-container-preview {
            display: flex;
            gap: 30px; 
            flex-wrap: wrap;
            justify-content: center;
            padding-bottom: 40px;
        }

        /* Card Style */
        .card {
            background-color: var(--color-bg-card-light);
            padding: 30px;
            border-radius: 15px; 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); 
            flex: 1;
            min-width: 280px;
            transition: transform 0.4s ease-out, box-shadow 0.4s ease-out, border-color 0.4s;
            border-left: 5px solid var(--color-secondary);
            text-align: center;
            cursor: pointer; 
        }

        .card:hover {
            transform: translateY(-8px); 
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            border-left-color: var(--color-accent);
        }
        
        .card .icon-wrapper {
            font-size: 2.5rem;
            color: var(--color-accent);
            margin-bottom: 15px;
            display: block;
        }

        .card h3 {
            color: var(--color-primary);
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        /* =================================
            3. HALAMAN MATERI (FULL)
            ================================= */
        .materi-page {
            padding: 40px 0;
        }

        .materi-page h2 {
            color: var(--color-primary);
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
        }

        .materi-detail {
            background-color: var(--color-bg-card-light);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            border-top: 5px solid var(--color-secondary);
        }

        .materi-detail h3 {
            color: var(--color-secondary);
            font-size: 1.8rem;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 5px;
        }

        .materi-detail h4 {
            color: var(--color-primary);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .materi-detail ul, .materi-detail ol {
            margin-left: 20px;
            padding-bottom: 15px;
        }
        
        /* =================================
            4. HALAMAN VIDEO
            ================================= */
        .video-page {
            padding: 40px 0;
            text-align: center;
        }
        
        .video-page h2 {
            color: var(--color-primary);
            font-size: 2.5rem;
            margin-bottom: 40px;
        }

        .video-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* Rasio 16:9 */
            height: 0;
            margin: 0 auto 30px;
            max-width: 800px; /* Batasan lebar */
            background-color: var(--color-text-dark); /* Placeholder warna gelap */
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* Jika menggunakan iframe/video, style ini berlaku */
        .video-wrapper iframe, .video-wrapper video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            border: none;
        }

        /* =================================
            5. FOOTER (Kontak selalu ada)
            ================================= */
        footer {
            /* Background akan gelap di Light Mode (--color-text-dark) */
            background-color: var(--color-text-dark);
            /* Warna teks akan terang di Light Mode (--color-bg-light) */
            color: var(--color-bg-light); 
            padding: 30px 0;
            text-align: center;
            font-size: 0.9rem;
            margin-top: 40px;
        }

        /* PENGATURAN SPESIFIK UNTUK MODE GELAP */
        .dark-mode footer {
            /* Background di Mode Gelap harus lebih gelap dari Light Mode, misal #1E1E1E */
            background-color: #1E1E1E; 
            /* Warna teks di Mode Gelap harus terang (--color-text-dark di dark-mode adalah #E0F7FA) */
            color: var(--color-text-dark); 
        }
        
        /* WARNA LINK DI FOOTER (Tetap kuning aksen untuk kontras di kedua mode) */
        footer a {
            color: var(--color-accent);
            margin: 0 10px;
        }

        footer a:hover {
            color: var(--color-secondary);
        }
        /* =================================
            6. MODAL & CHAT AI (Tetap Ada)
            ================================= */
        /* Modal Pop-up Styles (untuk konten materi) */
        .modal-overlay {
            display: none; 
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); 
            z-index: 1500; 
            justify-content: center;
            align-items: center;
            overflow-y: auto; 
        }
        
        .modal-content {
            background-color: var(--color-bg-card-light);
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            position: relative;
            transform: scale(0.8); 
            opacity: 0;
            transition: all 0.3s ease-out;
            margin: 20px auto; 
        }
        
        .modal-overlay.active .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 2rem;
            color: var(--color-text-dark);
            cursor: pointer;
            transition: color 0.2s;
        }

        .modal-close:hover {
            color: var(--color-primary);
        }

        .modal-content h3 {
            color: var(--color-primary);
            font-size: 2rem;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--color-secondary);
            padding-bottom: 10px;
        }
        
        .modal-content p, .modal-content li {
            margin-bottom: 15px;
            text-align: justify;
        }

        /* Chat AI Button & Modal */
        #ai-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--color-secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px; 
            height: 60px; 
            font-size: 1.8rem; 
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
            z-index: 2000; 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #ai-chat-button:hover {
            background-color: var(--color-primary);
            transform: scale(1.1); 
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .chat-modal {
            position: fixed;
            bottom: 100px; 
            right: 30px;
            width: 350px;
            height: 450px;
            background-color: var(--color-bg-card-light);
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
            z-index: 2000;
            display: none;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            transform: translateY(20px);
        }

        .chat-modal.open {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .chat-header {
            background-color: var(--color-primary);
            color: white;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        
        .chat-header button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .chat-body {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            background-color: var(--color-bg-light);
        }

        .chat-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ddd;
            background-color: var(--color-bg-card-light);
        }

        .chat-input input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
            margin-right: 10px;
            font-family: inherit;
            color: var(--color-text-dark);
            background-color: var(--color-bg-light);
        }

        .chat-input button {
            background-color: var(--color-secondary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .chat-input button:hover {
            background-color: var(--color-primary);
        }

        .message-user, .message-ai {
            padding: 8px 12px;
            border-radius: 15px;
            margin-bottom: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message-user {
            background-color: var(--color-primary);
            color: white;
            align-self: flex-end;
            margin-left: auto;
        }

        .message-ai {
            background-color: var(--color-accent);
            color: var(--color-text-dark);
            align-self: flex-start;
        }
        
        /* =================================
            7. RESPONSIVENESS (PENGUATAN TAMPILAN HANDPHONE)
            ================================= */
        @media (max-width: 768px) {
            /* Perbaikan Global */
            .container {
                width: 95%; 
            }

            /* # Perbaikan Header dan Navigasi */
            header .container {
                /* Mengubah kembali ke tata letak horizontal untuk logo dan hamburger */
                display: flex; 
                flex-direction: row; 
                justify-content: space-between;
                align-items: center;
                /* Tambahkan padding samping agar tombol tidak mepet ke pinggir */
                padding: 1rem 15px; 
            }
            
            /* TAMPILKAN DAN POSISIKAN HAMBURGER DI KIRI */
            #hamburger-btn {
                display: block; 
                order: 1; /* Paling kiri */
                margin-right: 15px; /* Jarak antara hamburger dan judul */
            }
            
            /* POSISIKAN JUDUL DI SEBELAH HAMBURGER */
            header h1 {
                font-size: 1.5rem; 
                margin-bottom: 0; 
                order: 2; /* Di sebelah kiri, setelah hamburger */
                flex-grow: 1; /* Memastikan judul mengambil sisa ruang */
                text-align: left; /* Teks judul rata kiri */
            }
            
            /* Sembunyikan navigasi desktop dan mode toggle desktop */
            #desktop-nav, #mode-toggle-desktop {
                display: none;
            }
            
            /* # Perbaikan Hero dan Banner */
            .image-banner {
                height: 250px; 
                margin-bottom: 20px;
            }

            .hero h2 {
                font-size: 1.5rem; 
            }

            .hero p {
                font-size: 0.9rem;
                padding: 0 5px;
                margin-bottom: 15px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.85rem;
            }
            
            .section-tujuan h2, .materi-page h2, .video-page h2 {
                font-size: 1.8rem; 
                margin-bottom: 25px;
            }
            
            .tujuan-placeholder {
                 padding: 15px;
                 min-height: 80px;
                 font-size: 0.9rem;
            }

            /* # Perbaikan Cards Materi */
            .cards-container-preview {
                flex-direction: column;
                gap: 20px; 
                padding: 0 10px 40px; 
            }
            
            .card {
                min-width: 100%; 
                padding: 20px;
                text-align: left; 
            }
            
            .card h3 {
                font-size: 1.2rem;
            }
            
            .card .icon-wrapper {
                float: left; 
                margin-right: 15px;
                margin-bottom: 0;
            }
            
            .card p {
                font-size: 0.9rem;
            }

            /* # Perbaikan Materi Detail */
            .materi-detail {
                padding: 20px;
            }
            
            .materi-detail h3 {
                font-size: 1.4rem;
            }

            /* # Perbaikan Video */
            .video-wrapper {
                width: 95%; 
                margin: 0 auto 20px;
                padding-bottom: 56.25%; 
            }
            
            /* # Perbaikan Chat Modal */
            .chat-modal {
                width: 95%;
                right: 2.5%;
                bottom: 80px; 
                height: 75%; 
            }

            #ai-chat-button {
                bottom: 20px;
                right: 20px;
            }

            /* # Perbaikan Footer */
            footer {
                padding: 20px 0;
            }

            footer p {
                font-size: 0.8rem;
                padding: 0 10px;
            }
        }
    </style>
</head>

<body class="light-mode">
    <header>
        <div class="container">
            <button id="hamburger-btn" class="fas fa-bars" aria-label="Buka Menu"></button> 
            <h1>Bank Sampah Ceria ðŸŒ³</h1>
            
            <nav id="desktop-nav">
                <ul>
                    <li><a data-page="beranda" class="active">Beranda</a></li>
                    <li><a data-page="materi">Materi</a></li>
                    <li><a data-page="video">Video</a></li>
                </ul>
            </nav>
            <button id="mode-toggle-desktop">â˜€ Mode Terang</button>
        </div>
    </header>

    <div id="sidebar-overlay"></div>
    <div id="mobile-sidebar">
        <div class="sidebar-header">
            <h2>Menu Utama</h2>
            <button id="close-sidebar-btn" class="fas fa-times" aria-label="Tutup Menu"></button>
        </div>
        <nav id="mobile-nav">
            <ul>
                <li><a data-page="beranda" class="active">Beranda</a></li>
                <li><a data-page="materi">Materi</a></li>
                <li><a data-page="video">Video</a></li>
            </ul>
        </nav>
        <button id="mode-toggle-mobile">â˜€ Mode Terang</button>
    </div>
    
    <div id="main-content" class="container">
    </div>

    <footer>
        <div class="container">
            <p>Kontak Kami: 
                <a href="mailto:info@banksampahceria.com"><i class="fas fa-envelope"></i> info@banksampahceria.com</a> 
                <a href="tel:021123456"><i class="fas fa-phone"></i> (021) 123456</a>
            </p>
            <p>&copy; 2025 Bank Sampah Ceria. Kelola Sampah, Jaga Alam. ðŸŒŽ</p>
        </div>
    </footer>

    <div id="materi-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h3 id="modal-title"></h3>
            <div id="modal-body"></div>
        </div>
    </div>

    <button id="ai-chat-button" title="Tanya Asisten AI">
        <i class="fas fa-robot"></i>
    </button>
    
    <div id="chat-modal" class="chat-modal">
        <div class="chat-header">
            <span>Asisten AI Bank Sampah Ceria</span>
            <button id="close-chat-btn">&times;</button>
        </div>
        <div id="chat-body" class="chat-body">
            <div class="message-ai">Halo! Saya Asisten AI Anda. Ada yang bisa saya bantu terkait pengelolaan sampah?</div>
        </div>
        <div class="chat-input">
            <input type="text" id="chat-input-field" placeholder="Ketik pertanyaan Anda...">
            <button id="send-chat-btn">Kirim</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Deklarasi Elemen
            const body = document.body;
            const mainContent = document.getElementById('main-content');
            
            // Mode Toggle Elements
            const modeToggleDesktop = document.getElementById('mode-toggle-desktop');
            const modeToggleMobile = document.getElementById('mode-toggle-mobile');
            
            // Desktop Nav Links
            const desktopNavLinks = document.querySelectorAll('#desktop-nav ul li a');
            // Mobile Nav Links
            const mobileNavLinks = document.querySelectorAll('#mobile-nav ul li a');
            
            // Sidebar Elements (Baru)
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const mobileSidebar = document.getElementById('mobile-sidebar');
            const closeSidebarBtn = document.getElementById('close-sidebar-btn');
            const sidebarOverlay = document.getElementById('sidebar-overlay');

            // Nav Links (Gabungan untuk event listener)
            const allNavLinks = [...desktopNavLinks, ...mobileNavLinks];
            
            // Chat AI Elements
            const chatButton = document.getElementById('ai-chat-button');
            const chatModal = document.getElementById('chat-modal');
            const closeChatBtn = document.getElementById('close-chat-btn');
            const chatBody = document.getElementById('chat-body');
            const chatInputField = document.getElementById('chat-input-field');
            const sendChatBtn = document.getElementById('send-chat-btn');
            
            // Modal Materi Elements
            const materiModal = document.getElementById('materi-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const modalClose = document.querySelector('.modal-close');

            // --- Database Materi (Konten Bacaan) ---
            const materiDatabase = {
                pilah: {
                    title: "Panduan Lengkap Memilah Sampah",
                    icon: '<i class="fas fa-recycle"></i>',
                    content: `
                        <p>Memilah sampah adalah langkah pertama dan terpenting dalam pengelolaan sampah yang berkelanjutan. Pemilahan yang tepat meningkatkan nilai daur ulang.</p>
                        <h4>Jenis-Jenis Utama Sampah:</h4>
                        <ul>
                            <li><strong>Anorganik Kering (Daur Ulang):</strong> Plastik (botol, kemasan), kertas (koran, kardus), logam (kaleng), kaca. Pastikan dicuci bersih dan dikeringkan.</li>
                            <li><strong>Organik Basah (Kompos):</strong> Sisa makanan, kulit buah, daun kering, dan ampas kopi/teh. Sampah ini dapat diolah menjadi kompos.</li>
                            <li><strong>Bahan Berbahaya dan Beracun (B3):</strong> Baterai bekas, lampu bekas, kemasan obat, dan alat elektronik. Kumpulkan secara terpisah di wadah khusus dan jangan dicampur.</li>
                        </ul>
                        <p>Dengan memilah, Anda tidak hanya membantu Bank Sampah, tetapi juga mengurangi volume sampah yang berakhir di TPA.</p>
                    `
                },
                tabung: {
                    title: "Langkah-Langkah Praktis Cara Menabung Sampah",
                    icon: '<i class="fas fa-hand-holding-usd"></i>',
                    content: `
                        <p>Menabung sampah di Bank Sampah Ceria itu mudah dan menguntungkan. Berikut adalah langkah-langkahnya:</p>
                        <ol>
                            <li><strong>Pilahkan dan Bersihkan:</strong> Pastikan sampah anorganik (plastik, kertas, kaleng) Anda sudah bersih dari sisa makanan atau cairan. Sampah yang bersih memiliki nilai jual lebih tinggi.</li>
                            <li><strong>Bawa ke Bank Sampah:</strong> Datang ke lokasi Bank Sampah Ceria atau pos penimbangan terdekat sesuai jadwal.</li>
                            <li><strong>Penimbangan:</strong> Petugas akan menimbang sampah Anda berdasarkan jenisnya (misalnya, botol PET, HVS, kardus). Setiap jenis memiliki harga yang berbeda.</li>
                            <li><strong>Catat di Buku Tabungan:</strong> Jumlah uang atau poin dari hasil timbangan akan dicatat dalam buku tabungan Bank Sampah Anda.</li>
                            <li><strong>Tarik Dana:</strong> Anda bisa menarik dana atau menggunakan poin tabungan Anda untuk berbagai program setelah mencapai batas minimum.</li>
                        </ol>
                        <p>Ayo, jadikan sampah sebagai sumber tabungan dan keberlanjutan ekonomi!</p>
                    `
                },
                manfaat: {
                    title: "Dampak Positif Bank Sampah bagi Lingkungan dan Ekonomi",
                    icon: '<i class="fas fa-leaf"></i>',
                    content: `
                        <p>Partisipasi Anda dalam Bank Sampah memberikan manfaat berlipat ganda bagi lingkungan, komunitas, dan diri Anda sendiri.</p>
                        <h4>Manfaat Utama:</h4>
                        <ul>
                            <li><strong>Pengurangan Polusi:</strong> Mengurangi jumlah sampah yang dibuang ke TPA, yang berarti mengurangi emisi gas metana penyebab pemanasan global.</li>
                            <li><strong>Pelestarian Sumber Daya:</strong> Daur ulang mengurangi kebutuhan untuk mengeksploitasi sumber daya alam baru (pohon, minyak bumi, mineral).</li>
                            <li><strong>Peningkatan Ekonomi Masyarakat:</strong> Sampah yang tadinya tidak berguna menjadi komoditas yang menghasilkan uang bagi penabung (masyarakat) dan membantu menciptakan lapangan kerja di sektor daur ulang.</li>
                            <li><strong>Lingkungan Bersih:</strong> Mendorong kesadaran masyarakat untuk menjaga kebersihan lingkungan sekitar.</li>
                            <li><strong>Menciptakan Komunitas Peduli:</strong> Membangun kebersamaan dan kepedulian antarwarga terhadap lingkungan.</li>
                        </ul>
                        <p>Setiap botol plastik yang Anda pilah adalah kontribusi nyata bagi bumi yang lebih hijau.</p>
                    `
                }
            };
            
            // --- Logika Halaman (SPA) ---
            const renderHomePage = () => {
                mainContent.innerHTML = `
                    <section class="image-banner">
                        <img src="https://awsimages.detik.net.id/community/media/visual/2023/01/03/aksi-pandawara-dengan-membuat-konten-bersih-bersih-sungai-banyak-mendapat-apresiasi-dari-berbagai-kalangan-1_169.jpeg?w=1200" alt="Gotong Royong Membersihkan Sampah">
                        <div class="hero">
                            <h2>Selamat Datang di Portal Bank Sampah Ceria!</h2>
                            <p>Bersama kita wujudkan lingkungan yang bersih dan lestari. Mulai dari pilah sampah, tabung, dan dapatkan manfaatnya!</p>
                            <a data-page="materi" class="btn primary nav-link-custom">Pelajari Lebih Lanjut</a>
                        </div>
                    </section>
                    
                    <section class="section-tujuan">
                        <h2>Tujuan Pembuatan Website</h2>
                        <div class="tujuan-placeholder">
                            <p style="color:var(--color-text-dark);">Tujuan kami membuat website tentang limbah di SMPN 9 Semarang adalah <strong>untuk meningkatkan kesadaran seluruh warga sekolah mengenai betapa pentingnya mengelola sampah dalam bentuk apa pun agar tidak menimbulkan dampak negatif bagi lingkungan.</strong> Melalui website ini, kami ingin <strong>memberikan informasi yang edukatif dan interaktif tentang berbagai jenis limbah, cara pengelolaannya yang benar, serta dampak yang ditimbulkan jika sampah tidak ditangani dengan baik.</strong></p>
                            <br>
                            <p style="color:var(--color-text-dark);">Selain itu, website ini juga <strong>bertujuan untuk mengontrol dan memantau jumlah serta jenis sampah yang dihasilkan di lingkungan sekolah, sehingga kami dapat menemukan solusi yang tepat berdasarkan data-data yang telah kami kumpulkan.</strong> Dengan adanya website ini, diharapkan seluruh siswa, guru, dan warga sekolah dapat lebih peduli terhadap kebersihan dan kelestarian lingkungan, serta ikut berpartisipasi aktif dalam menciptakan lingkungan sekolah yang bersih,Â danÂ sehat.</p>
                        </div>
                    </section>

                    <section class="home-cards-preview">
                        <h2>Materi Pilihan Kami</h2>
                        <div class="cards-container-preview">
                            <div class="card" data-target="pilah">
                                <span class="icon-wrapper">${materiDatabase.pilah.icon}</span>
                                <div>
                                    <h3>${materiDatabase.pilah.title}</h3>
                                    <p>Kenali jenis-jenis sampah dan cara memilahnya dengan benar.</p>
                                    <p>(Klik untuk selengkapnya)</p>
                                </div>
                            </div>
                            
                            <div class="card" data-target="tabung">
                                <span class="icon-wrapper">${materiDatabase.tabung.icon}</span>
                                <div>
                                    <h3>${materiDatabase.tabung.title}</h3>
                                    <p>Langkah mudah menukarkan sampah terpilah Anda menjadi uang atau poin.</p>
                                    <p>(Klik untuk selengkapnya)</p>
                                </div>
                            </div>
                            
                            <div class="card" data-target="manfaat">
                                <span class="icon-wrapper">${materiDatabase.manfaat.icon}</span>
                                <div>
                                    <h3>${materiDatabase.manfaat.title}</h3>
                                    <p>Dampak positif Bank Sampah terhadap lingkungan dan ekonomi.</p>
                                    <p>(Klik untuk selengkapnya)</p>
                                </div>
                            </div>
                        </div>
                    </section>
                `;
                addCardListeners();
                addCustomNavListeners();
            };

            const renderMateriPage = () => {
                mainContent.innerHTML = `
                    <section class="materi-page">
                        <h2>Semua Materi Bank Sampah</h2>
                        <div class="materi-detail">
                            <h3>${materiDatabase.pilah.title}</h3>
                            ${materiDatabase.pilah.content}
                        </div>
                        <div class="materi-detail">
                            <h3>${materiDatabase.tabung.title}</h3>
                            ${materiDatabase.tabung.content}
                        </div>
                        <div class="materi-detail">
                            <h3>${materiDatabase.manfaat.title}</h3>
                            ${materiDatabase.manfaat.content}
                        </div>
                    </section>
                `;
            };

            const renderVideoPage = () => {
                mainContent.innerHTML = `
                    <section class="video-page">
                        <h2>Video Edukasi & Inspirasi</h2>
                        
                        <div class="video-wrapper">
                            <video controls>
                                <source src="Video Bank Sampah.mp4" type="video/mp4">
                                Maaf, browser Anda tidak mendukung tag video HTML5.
                            </video>
                        </div>
                        <p style="margin-top: 15px;">Silakan ganti placeholder di atas dengan video edukasi yang Anda inginkan!</p>
                    </section>
                `;
            };

            const closeSidebar = () => {
                mobileSidebar.classList.remove('open');
                sidebarOverlay.style.display = 'none';
                body.style.overflow = 'auto'; 
            };
            
            const navigateTo = (page) => {
                closeSidebar();
                
                allNavLinks.forEach(link => link.classList.remove('active'));

                document.querySelectorAll(`[data-page="${page}"]`).forEach(link => {
                    link.classList.add('active');
                });

                switch (page) {
                    case 'materi':
                        renderMateriPage();
                        break;
                    case 'video':
                        renderVideoPage();
                        break;
                    case 'beranda':
                    default:
                        renderHomePage();
                        break;
                }
                window.scrollTo(0, 0);
            };
            
            allNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const page = e.target.getAttribute('data-page');
                    navigateTo(page);
                });
            });

            const addCustomNavListeners = () => {
                document.querySelectorAll('.nav-link-custom').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = e.target.getAttribute('data-page');
                        navigateTo(page);
                    });
                });
            };

            const addCardListeners = () => {
                const cards = document.querySelectorAll('.card');
                cards.forEach(card => {
                    card.addEventListener('click', () => {
                        navigateTo('materi');
                    });
                });
            };
            
            // --- Logika Sidebar ---
            const openSidebar = () => {
                mobileSidebar.classList.add('open');
                sidebarOverlay.style.display = 'block';
                body.style.overflow = 'hidden';
            };

            hamburgerBtn.addEventListener('click', openSidebar);
            closeSidebarBtn.addEventListener('click', closeSidebar);
            sidebarOverlay.addEventListener('click', closeSidebar); 

            // --- Fungsi Mode Terang/Gelap ---
            const setMode = (mode) => {
                const isDark = (mode === 'dark');
                if (isDark) {
                    body.classList.add('dark-mode');
                    body.classList.remove('light-mode');
                    localStorage.setItem('theme', 'dark');
                } else {
                    body.classList.add('light-mode');
                    body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                }
                
                const newText = isDark ? 'ðŸŒ™ Mode Gelap' : 'â˜€ Mode Terang';
                // Toggle mode button desktop disembunyikan di mobile, tapi tetap diupdate di desktop view
                modeToggleDesktop.innerHTML = newText;
                modeToggleMobile.innerHTML = newText;
            };

            const toggleMode = () => {
                if (body.classList.contains('light-mode')) {
                    setMode('dark');
                } else {
                    setMode('light');
                }
            };
            
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                setMode(savedTheme);
            } else {
                setMode('light');
            }

            modeToggleDesktop.addEventListener('click', toggleMode);
            modeToggleMobile.addEventListener('click', toggleMode);

            // --- Logika Chat AI (Simulasi) ---
            const addMessage = (text, sender) => {
                const messageDiv = document.createElement('div');
                messageDiv.className = sender === 'user' ? 'message-user' : 'message-ai';
                messageDiv.textContent = text;
                chatBody.appendChild(messageDiv);
                chatBody.scrollTop = chatBody.scrollHeight;
            };

            const simulateAIResponse = (userMessage) => {
                let response = "Maaf, saya hanya Asisten simulasi. Silakan lihat informasi lengkap di bagian 'Materi' atau 'Video' kami.";
                const lowerCaseMsg = userMessage.toLowerCase();

                if (lowerCaseMsg.includes("sampah")) {
                    response = "Bank Sampah Ceria menerima sampah anorganik terpilah seperti plastik, kertas, dan logam. Cek halaman Materi untuk info lengkap!";
                } else if (lowerCaseMsg.includes("menabung")) {
                    response = "Untuk menabung, pisahkan sampah Anda, bawa ke lokasi Bank Sampah terdekat, dan petugas kami akan menimbangnya.";
                } else if (lowerCaseMsg.includes("terima kasih")) {
                    response = "Sama-sama! Senang bisa membantu Anda menjaga lingkungan. Mari bersama wujudkan Indonesia bersih! ðŸŒ¿";
                }

                setTimeout(() => {
                    addMessage(response, 'ai');
                }, 1000);
            };

            const sendMessage = () => {
                const message = chatInputField.value.trim();
                if (message) {
                    addMessage(message, 'user');
                    simulateAIResponse(message);
                    chatInputField.value = '';
                }
            };

            chatButton.addEventListener('click', () => {
                chatModal.classList.toggle('open');
                if (chatModal.classList.contains('open')) {
                   chatInputField.focus();
                }
            });

            closeChatBtn.addEventListener('click', () => {
                chatModal.classList.remove('open');
            });

            sendChatBtn.addEventListener('click', sendMessage);

            chatInputField.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // --- Inisialisasi: Muat Halaman Beranda saat pertama kali dibuka ---
            navigateTo('beranda'); 
        });
    </script>
</body>
</html>
